{"abi":[{"type":"constructor","inputs":[{"name":"owner_","type":"address","internalType":"address"},{"name":"maxUsdc_","type":"uint256","internalType":"uint256"},{"name":"maxEth_","type":"uint256","internalType":"uint256"},{"name":"allowedTokens_","type":"address[]","internalType":"address[]"},{"name":"policyHash_","type":"bytes32","internalType":"bytes32"}],"stateMutability":"nonpayable"},{"type":"function","name":"getPolicy","inputs":[],"outputs":[{"name":"","type":"tuple","internalType":"struct IPolicyGuard.PolicyConfig","components":[{"name":"maxSettlementUsdc","type":"uint256","internalType":"uint256"},{"name":"maxSettlementEth","type":"uint256","internalType":"uint256"},{"name":"allowedTokens","type":"address[]","internalType":"address[]"},{"name":"policyHash","type":"bytes32","internalType":"bytes32"}]}],"stateMutability":"view"},{"type":"function","name":"isTokenAllowed","inputs":[{"name":"token","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"markSettled","inputs":[{"name":"sessionId","type":"bytes32","internalType":"bytes32"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"maxSettlementEth","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"maxSettlementUsdc","inputs":[],"outputs":[{"name":"","type":"uint256","internalType":"uint256"}],"stateMutability":"view"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"policyHash","inputs":[],"outputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"renounceOwnership","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"settledSessions","inputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"transferOwnership","inputs":[{"name":"newOwner","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"updatePolicy","inputs":[{"name":"newPolicy","type":"tuple","internalType":"struct IPolicyGuard.PolicyConfig","components":[{"name":"maxSettlementUsdc","type":"uint256","internalType":"uint256"},{"name":"maxSettlementEth","type":"uint256","internalType":"uint256"},{"name":"allowedTokens","type":"address[]","internalType":"address[]"},{"name":"policyHash","type":"bytes32","internalType":"bytes32"}]}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"validateSettlement","inputs":[{"name":"sessionId","type":"bytes32","internalType":"bytes32"},{"name":"usdcToken","type":"address","internalType":"address"},{"name":"usdcAmount","type":"uint256","internalType":"uint256"},{"name":"ethAmount","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"event","name":"OwnershipTransferred","inputs":[{"name":"previousOwner","type":"address","indexed":true,"internalType":"address"},{"name":"newOwner","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"PolicyUpdated","inputs":[{"name":"oldPolicyHash","type":"bytes32","indexed":false,"internalType":"bytes32"},{"name":"newPolicyHash","type":"bytes32","indexed":false,"internalType":"bytes32"},{"name":"timestamp","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"SettlementApproved","inputs":[{"name":"sessionId","type":"bytes32","indexed":true,"internalType":"bytes32"},{"name":"usdcAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"ethAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"policyHash","type":"bytes32","indexed":false,"internalType":"bytes32"}],"anonymous":false},{"type":"event","name":"SettlementRejected","inputs":[{"name":"sessionId","type":"bytes32","indexed":true,"internalType":"bytes32"},{"name":"reason","type":"string","indexed":false,"internalType":"string"}],"anonymous":false},{"type":"error","name":"AssetNotAllowed","inputs":[{"name":"token","type":"address","internalType":"address"}]},{"type":"error","name":"ExceedsMaxSettlement","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"max","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"OwnableInvalidOwner","inputs":[{"name":"owner","type":"address","internalType":"address"}]},{"type":"error","name":"OwnableUnauthorizedAccount","inputs":[{"name":"account","type":"address","internalType":"address"}]},{"type":"error","name":"PolicyHashMismatch","inputs":[{"name":"expected","type":"bytes32","internalType":"bytes32"},{"name":"actual","type":"bytes32","internalType":"bytes32"}]},{"type":"error","name":"Unauthorized","inputs":[]}],"bytecode":{"object":"0x608060405234801562000010575f80fd5b5060405162000ba138038062000ba183398101604081905262000033916200023b565b846001600160a01b0381166200006257604051631e4fbdf760e01b81525f600482015260240160405180910390fd5b6200006d816200013e565b506001849055600283905560038190555f5b8251811015620000dd57600160045f858481518110620000a357620000a36200033b565b6020908102919091018101516001600160a01b031682528101919091526040015f20805460ff19169115159190911790556001016200007f565b508151620000f39060059060208501906200018d565b50604080515f815260208101839052428183015290517f52ccf6c8c2db75db3e466f0c9f0abe14d6238d0c2249682cd85987146b4a97959181900360600190a150505050506200034f565b5f80546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b828054828255905f5260205f20908101928215620001e3579160200282015b82811115620001e357825182546001600160a01b0319166001600160a01b03909116178255602090920191600190910190620001ac565b50620001f1929150620001f5565b5090565b5b80821115620001f1575f8155600101620001f6565b80516001600160a01b038116811462000222575f80fd5b919050565b634e487b7160e01b5f52604160045260245ffd5b5f805f805f60a0868803121562000250575f80fd5b6200025b866200020b565b602087810151604089015160608a01519398509096509450906001600160401b038082111562000289575f80fd5b818901915089601f8301126200029d575f80fd5b815181811115620002b257620002b262000227565b8060051b604051601f19603f83011681018181108582111715620002da57620002da62000227565b60405291825284820192508381018501918c831115620002f8575f80fd5b938501935b82851015620003215762000311856200020b565b84529385019392850192620002fd565b809750505050505050608086015190509295509295909350565b634e487b7160e01b5f52603260045260245ffd5b610844806200035d5f395ff3fe608060405234801561000f575f80fd5b50600436106100b1575f3560e01c806386caf1021161006e57806386caf1021461013c5780638da5cb5b14610164578063ce1e46261461017e578063efa9c8ef14610193578063f2fde38b1461019c578063f9eaee0d146101af575f80fd5b8063098fb624146100b557806332591710146100d15780636c2291e6146100f4578063715018a6146101095780637e4228df146101115780637e7115ed14610133575b5f80fd5b6100be60035481565b6040519081526020015b60405180910390f35b6100e46100df36600461068c565b6101da565b60405190151581526020016100c8565b6101076101023660046106c4565b6102fa565b005b610107610467565b6100e461011f366004610702565b60066020525f908152604090205460ff1681565b6100be60015481565b61010761014a366004610702565b5f908152600660205260409020805460ff19166001179055565b5f546040516001600160a01b0390911681526020016100c8565b61018661047a565b6040516100c89190610719565b6100be60025481565b6101076101aa366004610794565b610529565b6100e46101bd366004610794565b6001600160a01b03165f9081526004602052604090205460ff1690565b5f8481526006602052604081205460ff161561023d5760405162461bcd60e51b815260206004820152601760248201527f53657373696f6e20616c726561647920736574746c656400000000000000000060448201526064015b60405180910390fd5b60015483111561026e57600154604051630517debb60e51b8152610234918591600401918252602082015260400190565b60025482111561029f57600254604051630517debb60e51b8152610234918491600401918252602082015260400190565b5f831180156102c657506001600160a01b0384165f9081526004602052604090205460ff16155b156102ef57604051630188053b60e41b81526001600160a01b0385166004820152602401610234565b506001949350505050565b610302610566565b600380548235600155602083013560025560608301359091555f5b600554811015610379575f60045f6005848154811061033e5761033e6107ad565b5f918252602080832091909101546001600160a01b031683528201929092526040019020805460ff191691151591909117905560010161031d565b5061038560055f6105e1565b5f5b61039460408401846107c1565b905081101561040357600160045f6103af60408701876107c1565b858181106103bf576103bf6107ad565b90506020020160208101906103d49190610794565b6001600160a01b0316815260208101919091526040015f20805460ff1916911515919091179055600101610387565b5061041160408301836107c1565b61041d916005916105fc565b5060408051828152606080850135602083015242928201929092527f52ccf6c8c2db75db3e466f0c9f0abe14d6238d0c2249682cd85987146b4a9795910160405180910390a15050565b61046f610566565b6104785f610592565b565b6104a560405180608001604052805f81526020015f8152602001606081526020015f80191681525090565b604051806080016040528060015481526020016002548152602001600580548060200260200160405190810160405280929190818152602001828054801561051457602002820191905f5260205f20905b81546001600160a01b031681526001909101906020018083116104f6575b50505050508152602001600354815250905090565b610531610566565b6001600160a01b03811661055a57604051631e4fbdf760e01b81525f6004820152602401610234565b61056381610592565b50565b5f546001600160a01b031633146104785760405163118cdaa760e01b8152336004820152602401610234565b5f80546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b5080545f8255905f5260205f2090810190610563919061065d565b828054828255905f5260205f2090810192821561064d579160200282015b8281111561064d5781546001600160a01b0319166001600160a01b0384351617825560209092019160019091019061061a565b5061065992915061065d565b5090565b5b80821115610659575f815560010161065e565b80356001600160a01b0381168114610687575f80fd5b919050565b5f805f806080858703121561069f575f80fd5b843593506106af60208601610671565b93969395505050506040820135916060013590565b5f602082840312156106d4575f80fd5b813567ffffffffffffffff8111156106ea575f80fd5b8201608081850312156106fb575f80fd5b9392505050565b5f60208284031215610712575f80fd5b5035919050565b5f602080835260a0830184518285015281850151604085015260408501516080606086015281815180845260c08701915084830193505f92505b8083101561077c5783516001600160a01b03168252928401926001929092019190840190610753565b50606087015160808701528094505050505092915050565b5f602082840312156107a4575f80fd5b6106fb82610671565b634e487b7160e01b5f52603260045260245ffd5b5f808335601e198436030181126107d6575f80fd5b83018035915067ffffffffffffffff8211156107f0575f80fd5b6020019150600581901b3603821315610807575f80fd5b925092905056fea264697066735822122014e1827c38d38aee7cb1246494a99299a49bebfa50795ffc96a4e9ee9209b36964736f6c63430008180033","sourceMap":"534:3455:11:-:0;;;953:536;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;1124:6;-1:-1:-1;;;;;1273:26:0;;1269:95;;1322:31;;-1:-1:-1;;;1322:31:0;;1350:1;1322:31;;;1878:51:15;1851:18;;1322:31:0;;;;;;;1269:95;1373:32;1392:12;1373:18;:32::i;:::-;-1:-1:-1;1142:17:11::1;:28:::0;;;1180:16:::1;:26:::0;;;1216:10:::1;:24:::0;;;-1:-1:-1;1251:117:11::1;1275:14;:21;1271:1;:25;1251:117;;;1353:4;1317:14;:33;1332:14;1347:1;1332:17;;;;;;;;:::i;:::-;;::::0;;::::1;::::0;;;;;;;-1:-1:-1;;;;;1317:33:11::1;::::0;;;::::1;::::0;;;;;;-1:-1:-1;1317:33:11;:40;;-1:-1:-1;;1317:40:11::1;::::0;::::1;;::::0;;;::::1;::::0;;-1:-1:-1;1298:3:11::1;1251:117;;;-1:-1:-1::0;1377:34:11;;::::1;::::0;:17:::1;::::0;:34:::1;::::0;::::1;::::0;::::1;:::i;:::-;-1:-1:-1::0;1427:55:11::1;::::0;;1449:1:::1;2274:25:15::0;;2330:2;2315:18;;2308:34;;;1466:15:11::1;2358:18:15::0;;;2351:34;1427:55:11;;::::1;::::0;;;;2262:2:15;1427:55:11;;::::1;953:536:::0;;;;;534:3455;;2912:187:0;2985:16;3004:6;;-1:-1:-1;;;;;3020:17:0;;;-1:-1:-1;;;;;;3020:17:0;;;;;;3052:40;;3004:6;;;;;;;3052:40;;2985:16;3052:40;2975:124;2912:187;:::o;534:3455:11:-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;;534:3455:11;-1:-1:-1;;;;;534:3455:11;;;;;;;;;;;-1:-1:-1;534:3455:11;;;;;;;-1:-1:-1;534:3455:11;;;-1:-1:-1;534:3455:11;:::i;:::-;;;:::o;:::-;;;;;;;;;;;;;;;14:177:15;93:13;;-1:-1:-1;;;;;135:31:15;;125:42;;115:70;;181:1;178;171:12;115:70;14:177;;;:::o;196:127::-;257:10;252:3;248:20;245:1;238:31;288:4;285:1;278:15;312:4;309:1;302:15;328:1399;459:6;467;475;483;491;544:3;532:9;523:7;519:23;515:33;512:53;;;561:1;558;551:12;512:53;584:40;614:9;584:40;:::i;:::-;643:2;670:18;;;664:25;729:2;714:18;;708:25;777:2;762:18;;756:25;574:50;;-1:-1:-1;664:25:15;;-1:-1:-1;708:25:15;-1:-1:-1;643:2:15;-1:-1:-1;;;;;830:14:15;;;827:34;;;857:1;854;847:12;827:34;895:6;884:9;880:22;870:32;;940:7;933:4;929:2;925:13;921:27;911:55;;962:1;959;952:12;911:55;991:2;985:9;1013:2;1009;1006:10;1003:36;;;1019:18;;:::i;:::-;1065:2;1062:1;1058:10;1097:2;1091:9;1160:2;1156:7;1151:2;1147;1143:11;1139:25;1131:6;1127:38;1215:6;1203:10;1200:22;1195:2;1183:10;1180:18;1177:46;1174:72;;;1226:18;;:::i;:::-;1262:2;1255:22;1312:18;;;1346:15;;;;-1:-1:-1;1388:11:15;;;1384:20;;;1416:19;;;1413:39;;;1448:1;1445;1438:12;1413:39;1472:11;;;;1492:159;1508:6;1503:3;1500:15;1492:159;;;1574:34;1604:3;1574:34;:::i;:::-;1562:47;;1525:12;;;;1629;;;;1492:159;;;1670:6;1660:16;;;;;;;;1716:3;1705:9;1701:19;1695:26;1685:36;;328:1399;;;;;;;;:::o;1940:127::-;2001:10;1996:3;1992:20;1989:1;1982:31;2032:4;2029:1;2022:15;2056:4;2053:1;2046:15;2072:319;534:3455:11;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x608060405234801561000f575f80fd5b50600436106100b1575f3560e01c806386caf1021161006e57806386caf1021461013c5780638da5cb5b14610164578063ce1e46261461017e578063efa9c8ef14610193578063f2fde38b1461019c578063f9eaee0d146101af575f80fd5b8063098fb624146100b557806332591710146100d15780636c2291e6146100f4578063715018a6146101095780637e4228df146101115780637e7115ed14610133575b5f80fd5b6100be60035481565b6040519081526020015b60405180910390f35b6100e46100df36600461068c565b6101da565b60405190151581526020016100c8565b6101076101023660046106c4565b6102fa565b005b610107610467565b6100e461011f366004610702565b60066020525f908152604090205460ff1681565b6100be60015481565b61010761014a366004610702565b5f908152600660205260409020805460ff19166001179055565b5f546040516001600160a01b0390911681526020016100c8565b61018661047a565b6040516100c89190610719565b6100be60025481565b6101076101aa366004610794565b610529565b6100e46101bd366004610794565b6001600160a01b03165f9081526004602052604090205460ff1690565b5f8481526006602052604081205460ff161561023d5760405162461bcd60e51b815260206004820152601760248201527f53657373696f6e20616c726561647920736574746c656400000000000000000060448201526064015b60405180910390fd5b60015483111561026e57600154604051630517debb60e51b8152610234918591600401918252602082015260400190565b60025482111561029f57600254604051630517debb60e51b8152610234918491600401918252602082015260400190565b5f831180156102c657506001600160a01b0384165f9081526004602052604090205460ff16155b156102ef57604051630188053b60e41b81526001600160a01b0385166004820152602401610234565b506001949350505050565b610302610566565b600380548235600155602083013560025560608301359091555f5b600554811015610379575f60045f6005848154811061033e5761033e6107ad565b5f918252602080832091909101546001600160a01b031683528201929092526040019020805460ff191691151591909117905560010161031d565b5061038560055f6105e1565b5f5b61039460408401846107c1565b905081101561040357600160045f6103af60408701876107c1565b858181106103bf576103bf6107ad565b90506020020160208101906103d49190610794565b6001600160a01b0316815260208101919091526040015f20805460ff1916911515919091179055600101610387565b5061041160408301836107c1565b61041d916005916105fc565b5060408051828152606080850135602083015242928201929092527f52ccf6c8c2db75db3e466f0c9f0abe14d6238d0c2249682cd85987146b4a9795910160405180910390a15050565b61046f610566565b6104785f610592565b565b6104a560405180608001604052805f81526020015f8152602001606081526020015f80191681525090565b604051806080016040528060015481526020016002548152602001600580548060200260200160405190810160405280929190818152602001828054801561051457602002820191905f5260205f20905b81546001600160a01b031681526001909101906020018083116104f6575b50505050508152602001600354815250905090565b610531610566565b6001600160a01b03811661055a57604051631e4fbdf760e01b81525f6004820152602401610234565b61056381610592565b50565b5f546001600160a01b031633146104785760405163118cdaa760e01b8152336004820152602401610234565b5f80546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b5080545f8255905f5260205f2090810190610563919061065d565b828054828255905f5260205f2090810192821561064d579160200282015b8281111561064d5781546001600160a01b0319166001600160a01b0384351617825560209092019160019091019061061a565b5061065992915061065d565b5090565b5b80821115610659575f815560010161065e565b80356001600160a01b0381168114610687575f80fd5b919050565b5f805f806080858703121561069f575f80fd5b843593506106af60208601610671565b93969395505050506040820135916060013590565b5f602082840312156106d4575f80fd5b813567ffffffffffffffff8111156106ea575f80fd5b8201608081850312156106fb575f80fd5b9392505050565b5f60208284031215610712575f80fd5b5035919050565b5f602080835260a0830184518285015281850151604085015260408501516080606086015281815180845260c08701915084830193505f92505b8083101561077c5783516001600160a01b03168252928401926001929092019190840190610753565b50606087015160808701528094505050505092915050565b5f602082840312156107a4575f80fd5b6106fb82610671565b634e487b7160e01b5f52603260045260245ffd5b5f808335601e198436030181126107d6575f80fd5b83018035915067ffffffffffffffff8211156107f0575f80fd5b6020019150600581901b3603821315610807575f80fd5b925092905056fea264697066735822122014e1827c38d38aee7cb1246494a99299a49bebfa50795ffc96a4e9ee9209b36964736f6c63430008180033","sourceMap":"534:3455:11:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;685:25;;;;;;;;;160::15;;;148:2;133:18;685:25:11;;;;;;;;1572:837;;;;;;:::i;:::-;;:::i;:::-;;;935:14:15;;928:22;910:41;;898:2;883:18;1572:837:11;770:187:15;2720:750:11;;;;;;:::i;:::-;;:::i;:::-;;2293:101:0;;;:::i;869:47:11:-;;;;;;:::i;:::-;;;;;;;;;;;;;;;;610:32;;;;;;2484:161;;;;;;:::i;:::-;2605:26;;;;:15;:26;;;;;:33;;-1:-1:-1;;2605:33:11;2634:4;2605:33;;;2484:161;1638:85:0;1684:7;1710:6;1638:85;;-1:-1:-1;;;;;1710:6:0;;;1872:51:15;;1860:2;1845:18;1638:85:0;1726:203:15;3542:293:11;;;:::i;:::-;;;;;;;:::i;648:31::-;;;;;;2543:215:0;;;;;;:::i;:::-;;:::i;3874:113:11:-;;;;;;:::i;:::-;-1:-1:-1;;;;;3959:21:11;3936:4;3959:21;;;:14;:21;;;;;;;;;3874:113;1572:837;1738:4;1824:26;;;:15;:26;;;;;;;;1823:27;1815:63;;;;-1:-1:-1;;;1815:63:11;;3276:2:15;1815:63:11;;;3258:21:15;3315:2;3295:18;;;3288:30;3354:25;3334:18;;;3327:53;3397:18;;1815:63:11;;;;;;;;;1951:17;;1938:10;:30;1934:119;;;2024:17;;1991:51;;-1:-1:-1;;;1991:51:11;;;;2012:10;;1991:51;;3600:25:15;;;3656:2;3641:18;;3634:34;3588:2;3573:18;;3426:248;1934:119:11;2123:16;;2111:9;:28;2107:115;;;2194:16;;2162:49;;-1:-1:-1;;;2162:49:11;;;;2183:9;;2162:49;;3600:25:15;;;3656:2;3641:18;;3634:34;3588:2;3573:18;;3426:248;2107:115:11;2290:1;2277:10;:14;:44;;;;-1:-1:-1;;;;;;2296:25:11;;;;;;:14;:25;;;;;;;;2295:26;2277:44;2273:108;;;2344:26;;-1:-1:-1;;;2344:26:11;;-1:-1:-1;;;;;1890:32:15;;2344:26:11;;;1872:51:15;1845:18;;2344:26:11;1726:203:15;2273:108:11;-1:-1:-1;2398:4:11;1572:837;;;;;;:::o;2720:750::-;1531:13:0;:11;:13::i;:::-;2822:10:11::1;::::0;;2863:27;::::1;2843:17;:47:::0;2919:26:::1;::::0;::::1;;-1:-1:-1::0;2900:45:11;2968:20:::1;::::0;::::1;;2955:33:::0;;;2804:15:::1;3031:124;3055:17;:24:::0;3051:28;::::1;3031:124;;;3139:5;3100:14;:36;3115:17;3133:1;3115:20;;;;;;;;:::i;:::-;;::::0;;;::::1;::::0;;;;;;::::1;::::0;-1:-1:-1;;;;;3115:20:11::1;3100:36:::0;;;::::1;::::0;;;;;;;;:44;;-1:-1:-1;;3100:44:11::1;::::0;::::1;;::::0;;;::::1;::::0;;-1:-1:-1;3081:3:11::1;3031:124;;;-1:-1:-1::0;3164:24:11::1;3171:17;;3164:24;:::i;:::-;3204:9;3199:135;3223:23;;::::0;::::1;:9:::0;:23:::1;:::i;:::-;:30;;3219:1;:34;3199:135;;;3319:4;3274:14;:42;3289:23;;::::0;::::1;:9:::0;:23:::1;:::i;:::-;3313:1;3289:26;;;;;;;:::i;:::-;;;;;;;;;;;;;;:::i;:::-;-1:-1:-1::0;;;;;3274:42:11::1;::::0;;::::1;::::0;::::1;::::0;;;;;;-1:-1:-1;3274:42:11;:49;;-1:-1:-1;;3274:49:11::1;::::0;::::1;;::::0;;;::::1;::::0;;-1:-1:-1;3255:3:11::1;3199:135;;;-1:-1:-1::0;3363:23:11::1;;::::0;::::1;:9:::0;:23:::1;:::i;:::-;3343:43;::::0;:17:::1;::::0;:43:::1;:::i;:::-;-1:-1:-1::0;3402:61:11::1;::::0;;4563:25:15;;;3425:20:11::1;::::0;;::::1;;4619:2:15::0;4604:18;;4597:34;3447:15:11::1;4647:18:15::0;;;4640:34;;;;3402:61:11::1;::::0;4536:18:15;3402:61:11::1;;;;;;;2794:676;2720:750:::0;:::o;2293:101:0:-;1531:13;:11;:13::i;:::-;2357:30:::1;2384:1;2357:18;:30::i;:::-;2293:101::o:0;3542:293:11:-;3586:19;-1:-1:-1;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3586:19:11;3624:204;;;;;;;;3670:17;;3624:204;;;;3719:16;;3624:204;;;;3764:17;3624:204;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;3624:204:11;;;;;;;;;;;;;;;;;;;;;;;;;3807:10;;3624:204;;;3617:211;;3542:293;:::o;2543:215:0:-;1531:13;:11;:13::i;:::-;-1:-1:-1;;;;;2627:22:0;::::1;2623:91;;2672:31;::::0;-1:-1:-1;;;2672:31:0;;2700:1:::1;2672:31;::::0;::::1;1872:51:15::0;1845:18;;2672:31:0::1;1726:203:15::0;2623:91:0::1;2723:28;2742:8;2723:18;:28::i;:::-;2543:215:::0;:::o;1796:162::-;1684:7;1710:6;-1:-1:-1;;;;;1710:6:0;735:10:2;1855:23:0;1851:101;;1901:40;;-1:-1:-1;;;1901:40:0;;735:10:2;1901:40:0;;;1872:51:15;1845:18;;1901:40:0;1726:203:15;2912:187:0;2985:16;3004:6;;-1:-1:-1;;;;;3020:17:0;;;-1:-1:-1;;;;;;3020:17:0;;;;;;3052:40;;3004:6;;;;;;;3052:40;;2985:16;3052:40;2975:124;2912:187;:::o;-1:-1:-1:-;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::i;:::-;;;:::o;:::-;;;;;;;;;;;;;;;196:173:15;264:20;;-1:-1:-1;;;;;313:31:15;;303:42;;293:70;;359:1;356;349:12;293:70;196:173;;;:::o;374:391::-;460:6;468;476;484;537:3;525:9;516:7;512:23;508:33;505:53;;;554:1;551;544:12;505:53;590:9;577:23;567:33;;619:38;653:2;642:9;638:18;619:38;:::i;:::-;374:391;;609:48;;-1:-1:-1;;;;704:2:15;689:18;;676:32;;755:2;740:18;727:32;;374:391::o;962:392::-;1053:6;1106:2;1094:9;1085:7;1081:23;1077:32;1074:52;;;1122:1;1119;1112:12;1074:52;1162:9;1149:23;1195:18;1187:6;1184:30;1181:50;;;1227:1;1224;1217:12;1181:50;1250:22;;1306:3;1288:16;;;1284:26;1281:46;;;1323:1;1320;1313:12;1281:46;1346:2;962:392;-1:-1:-1;;;962:392:15:o;1359:180::-;1418:6;1471:2;1459:9;1450:7;1446:23;1442:32;1439:52;;;1487:1;1484;1477:12;1439:52;-1:-1:-1;1510:23:15;;1359:180;-1:-1:-1;1359:180:15:o;1934:944::-;2086:4;2115:2;2144;2133:9;2126:21;2185:3;2174:9;2170:19;2231:6;2225:13;2220:2;2209:9;2205:18;2198:41;2293:2;2285:6;2281:15;2275:22;2270:2;2259:9;2255:18;2248:50;2345:2;2337:6;2333:15;2327:22;2385:4;2380:2;2369:9;2365:18;2358:32;2410:6;2445:12;2439:19;2482:6;2474;2467:22;2520:3;2509:9;2505:19;2498:26;;2565:2;2551:12;2547:21;2533:35;;2586:1;2577:10;;2596:195;2610:6;2607:1;2604:13;2596:195;;;2675:13;;-1:-1:-1;;;;;2671:39:15;2659:52;;2766:15;;;;2707:1;2625:9;;;;;2731:12;;;;2596:195;;;2600:3;2847:2;2839:6;2835:15;2829:22;2822:4;2811:9;2807:20;2800:52;2869:3;2861:11;;;;;;1934:944;;;;:::o;2883:186::-;2942:6;2995:2;2983:9;2974:7;2970:23;2966:32;2963:52;;;3011:1;3008;3001:12;2963:52;3034:29;3053:9;3034:29;:::i;3679:127::-;3740:10;3735:3;3731:20;3728:1;3721:31;3771:4;3768:1;3761:15;3795:4;3792:1;3785:15;3811:545;3904:4;3910:6;3970:11;3957:25;4064:2;4060:7;4049:8;4033:14;4029:29;4025:43;4005:18;4001:68;3991:96;;4083:1;4080;4073:12;3991:96;4110:33;;4162:20;;;-1:-1:-1;4205:18:15;4194:30;;4191:50;;;4237:1;4234;4227:12;4191:50;4270:4;4258:17;;-1:-1:-1;4321:1:15;4317:14;;;4301;4297:35;4287:46;;4284:66;;;4346:1;4343;4336:12;4284:66;3811:545;;;;;:::o","linkReferences":{}},"methodIdentifiers":{"getPolicy()":"ce1e4626","isTokenAllowed(address)":"f9eaee0d","markSettled(bytes32)":"86caf102","maxSettlementEth()":"efa9c8ef","maxSettlementUsdc()":"7e7115ed","owner()":"8da5cb5b","policyHash()":"098fb624","renounceOwnership()":"715018a6","settledSessions(bytes32)":"7e4228df","transferOwnership(address)":"f2fde38b","updatePolicy((uint256,uint256,address[],bytes32))":"6c2291e6","validateSettlement(bytes32,address,uint256,uint256)":"32591710"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.24+commit.e11b9ed9\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner_\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"maxUsdc_\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxEth_\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"allowedTokens_\",\"type\":\"address[]\"},{\"internalType\":\"bytes32\",\"name\":\"policyHash_\",\"type\":\"bytes32\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"AssetNotAllowed\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"max\",\"type\":\"uint256\"}],\"name\":\"ExceedsMaxSettlement\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"OwnableInvalidOwner\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"OwnableUnauthorizedAccount\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"expected\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"actual\",\"type\":\"bytes32\"}],\"name\":\"PolicyHashMismatch\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Unauthorized\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"oldPolicyHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"newPolicyHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"}],\"name\":\"PolicyUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"sessionId\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"usdcAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"ethAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"policyHash\",\"type\":\"bytes32\"}],\"name\":\"SettlementApproved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"sessionId\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"reason\",\"type\":\"string\"}],\"name\":\"SettlementRejected\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"getPolicy\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"maxSettlementUsdc\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxSettlementEth\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"allowedTokens\",\"type\":\"address[]\"},{\"internalType\":\"bytes32\",\"name\":\"policyHash\",\"type\":\"bytes32\"}],\"internalType\":\"struct IPolicyGuard.PolicyConfig\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"isTokenAllowed\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"sessionId\",\"type\":\"bytes32\"}],\"name\":\"markSettled\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"maxSettlementEth\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"maxSettlementUsdc\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"policyHash\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"name\":\"settledSessions\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"maxSettlementUsdc\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxSettlementEth\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"allowedTokens\",\"type\":\"address[]\"},{\"internalType\":\"bytes32\",\"name\":\"policyHash\",\"type\":\"bytes32\"}],\"internalType\":\"struct IPolicyGuard.PolicyConfig\",\"name\":\"newPolicy\",\"type\":\"tuple\"}],\"name\":\"updatePolicy\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"sessionId\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"usdcToken\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"usdcAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"ethAmount\",\"type\":\"uint256\"}],\"name\":\"validateSettlement\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"details\":\"Deployed independently, referenced by SentinelWallet.\",\"errors\":{\"OwnableInvalidOwner(address)\":[{\"details\":\"The owner is not a valid owner account. (eg. `address(0)`)\"}],\"OwnableUnauthorizedAccount(address)\":[{\"details\":\"The caller account is not authorized to perform an operation.\"}]},\"kind\":\"dev\",\"methods\":{\"owner()\":{\"details\":\"Returns the address of the current owner.\"},\"renounceOwnership()\":{\"details\":\"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner.\"},\"transferOwnership(address)\":{\"details\":\"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner.\"}},\"title\":\"PolicyGuard\",\"version\":1},\"userdoc\":{\"events\":{\"PolicyUpdated(bytes32,bytes32,uint256)\":{\"notice\":\"Emitted when the policy configuration is updated\"},\"SettlementApproved(bytes32,uint256,uint256,bytes32)\":{\"notice\":\"Emitted when a settlement passes policy checks\"},\"SettlementRejected(bytes32,string)\":{\"notice\":\"Emitted when a settlement is rejected by policy\"}},\"kind\":\"user\",\"methods\":{\"getPolicy()\":{\"notice\":\"Get the current policy configuration\"},\"isTokenAllowed(address)\":{\"notice\":\"Check if a token is allowed\"},\"markSettled(bytes32)\":{\"notice\":\"Mark a session as settled (called by SentinelWallet)\"},\"settledSessions(bytes32)\":{\"notice\":\"Track settled sessions to prevent replay\"},\"updatePolicy((uint256,uint256,address[],bytes32))\":{\"notice\":\"Update the policy configuration (owner only)\"},\"validateSettlement(bytes32,address,uint256,uint256)\":{\"notice\":\"Validate a settlement against on-chain policy rules\"}},\"notice\":\"On-chain policy enforcement for Sentinel settlement.         This is the final safety net \\u2014 even if the off-chain policy         engine is compromised, settlements must pass these checks.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/PolicyGuard.sol\":\"PolicyGuard\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/=lib/openzeppelin-contracts/contracts/\",\":ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\"]},\"sources\":{\"lib/openzeppelin-contracts/contracts/access/Ownable.sol\":{\"keccak256\":\"0xff6d0bb2e285473e5311d9d3caacb525ae3538a80758c10649a4d61029b017bb\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://8ed324d3920bb545059d66ab97d43e43ee85fd3bd52e03e401f020afb0b120f6\",\"dweb:/ipfs/QmfEckWLmZkDDcoWrkEvMWhms66xwTLff9DDhegYpvHo1a\"]},\"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol\":{\"keccak256\":\"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db\",\"dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9\"]},\"lib/openzeppelin-contracts/contracts/utils/Context.sol\":{\"keccak256\":\"0x493033a8d1b176a037b2cc6a04dad01a5c157722049bbecf632ca876224dd4b2\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://6a708e8a5bdb1011c2c381c9a5cfd8a9a956d7d0a9dc1bd8bcdaf52f76ef2f12\",\"dweb:/ipfs/Qmax9WHBnVsZP46ZxEMNRQpLQnrdE4dK8LehML1Py8FowF\"]},\"src/PolicyGuard.sol\":{\"keccak256\":\"0x9e033ed68930a41d0ea88e6bce293b67e33aadd84d4c19faaeed4149dfc108b6\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a3c4ee7a8d43ef3b464ccdc9625fe2023a02bf525fc6d80d209b73bd513addd3\",\"dweb:/ipfs/Qmcf2VHUFijP7qeWctjmpRt1VQ6T889UYPn1A6RjEAWByY\"]},\"src/interfaces/IPolicyGuard.sol\":{\"keccak256\":\"0x8637ff1941875c40b81a96c83007808d64fb49a185f999fbaa0e0daf27a545b5\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://89c7f0c84f1232bd8096101c5dcc8d3bff41cae9af4dbef68f118a3f1d8661fd\",\"dweb:/ipfs/QmX9NSEfBko6s4zXsTUnJZ4QvXpeTjA99hxkMiVn8roueg\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.24+commit.e11b9ed9"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"owner_","type":"address"},{"internalType":"uint256","name":"maxUsdc_","type":"uint256"},{"internalType":"uint256","name":"maxEth_","type":"uint256"},{"internalType":"address[]","name":"allowedTokens_","type":"address[]"},{"internalType":"bytes32","name":"policyHash_","type":"bytes32"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"type":"error","name":"AssetNotAllowed"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"max","type":"uint256"}],"type":"error","name":"ExceedsMaxSettlement"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"type":"error","name":"OwnableInvalidOwner"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"type":"error","name":"OwnableUnauthorizedAccount"},{"inputs":[{"internalType":"bytes32","name":"expected","type":"bytes32"},{"internalType":"bytes32","name":"actual","type":"bytes32"}],"type":"error","name":"PolicyHashMismatch"},{"inputs":[],"type":"error","name":"Unauthorized"},{"inputs":[{"internalType":"address","name":"previousOwner","type":"address","indexed":true},{"internalType":"address","name":"newOwner","type":"address","indexed":true}],"type":"event","name":"OwnershipTransferred","anonymous":false},{"inputs":[{"internalType":"bytes32","name":"oldPolicyHash","type":"bytes32","indexed":false},{"internalType":"bytes32","name":"newPolicyHash","type":"bytes32","indexed":false},{"internalType":"uint256","name":"timestamp","type":"uint256","indexed":false}],"type":"event","name":"PolicyUpdated","anonymous":false},{"inputs":[{"internalType":"bytes32","name":"sessionId","type":"bytes32","indexed":true},{"internalType":"uint256","name":"usdcAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"ethAmount","type":"uint256","indexed":false},{"internalType":"bytes32","name":"policyHash","type":"bytes32","indexed":false}],"type":"event","name":"SettlementApproved","anonymous":false},{"inputs":[{"internalType":"bytes32","name":"sessionId","type":"bytes32","indexed":true},{"internalType":"string","name":"reason","type":"string","indexed":false}],"type":"event","name":"SettlementRejected","anonymous":false},{"inputs":[],"stateMutability":"view","type":"function","name":"getPolicy","outputs":[{"internalType":"struct IPolicyGuard.PolicyConfig","name":"","type":"tuple","components":[{"internalType":"uint256","name":"maxSettlementUsdc","type":"uint256"},{"internalType":"uint256","name":"maxSettlementEth","type":"uint256"},{"internalType":"address[]","name":"allowedTokens","type":"address[]"},{"internalType":"bytes32","name":"policyHash","type":"bytes32"}]}]},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"stateMutability":"view","type":"function","name":"isTokenAllowed","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"bytes32","name":"sessionId","type":"bytes32"}],"stateMutability":"nonpayable","type":"function","name":"markSettled"},{"inputs":[],"stateMutability":"view","type":"function","name":"maxSettlementEth","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"maxSettlementUsdc","outputs":[{"internalType":"uint256","name":"","type":"uint256"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"policyHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}]},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"renounceOwnership"},{"inputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function","name":"settledSessions","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"transferOwnership"},{"inputs":[{"internalType":"struct IPolicyGuard.PolicyConfig","name":"newPolicy","type":"tuple","components":[{"internalType":"uint256","name":"maxSettlementUsdc","type":"uint256"},{"internalType":"uint256","name":"maxSettlementEth","type":"uint256"},{"internalType":"address[]","name":"allowedTokens","type":"address[]"},{"internalType":"bytes32","name":"policyHash","type":"bytes32"}]}],"stateMutability":"nonpayable","type":"function","name":"updatePolicy"},{"inputs":[{"internalType":"bytes32","name":"sessionId","type":"bytes32"},{"internalType":"address","name":"usdcToken","type":"address"},{"internalType":"uint256","name":"usdcAmount","type":"uint256"},{"internalType":"uint256","name":"ethAmount","type":"uint256"}],"stateMutability":"view","type":"function","name":"validateSettlement","outputs":[{"internalType":"bool","name":"","type":"bool"}]}],"devdoc":{"kind":"dev","methods":{"owner()":{"details":"Returns the address of the current owner."},"renounceOwnership()":{"details":"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner."},"transferOwnership(address)":{"details":"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner."}},"version":1},"userdoc":{"kind":"user","methods":{"getPolicy()":{"notice":"Get the current policy configuration"},"isTokenAllowed(address)":{"notice":"Check if a token is allowed"},"markSettled(bytes32)":{"notice":"Mark a session as settled (called by SentinelWallet)"},"settledSessions(bytes32)":{"notice":"Track settled sessions to prevent replay"},"updatePolicy((uint256,uint256,address[],bytes32))":{"notice":"Update the policy configuration (owner only)"},"validateSettlement(bytes32,address,uint256,uint256)":{"notice":"Validate a settlement against on-chain policy rules"}},"version":1}},"settings":{"remappings":["@openzeppelin/=lib/openzeppelin-contracts/contracts/","ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/PolicyGuard.sol":"PolicyGuard"},"evmVersion":"cancun","libraries":{}},"sources":{"lib/openzeppelin-contracts/contracts/access/Ownable.sol":{"keccak256":"0xff6d0bb2e285473e5311d9d3caacb525ae3538a80758c10649a4d61029b017bb","urls":["bzz-raw://8ed324d3920bb545059d66ab97d43e43ee85fd3bd52e03e401f020afb0b120f6","dweb:/ipfs/QmfEckWLmZkDDcoWrkEvMWhms66xwTLff9DDhegYpvHo1a"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/token/ERC20/IERC20.sol":{"keccak256":"0xe06a3f08a987af6ad2e1c1e774405d4fe08f1694b67517438b467cecf0da0ef7","urls":["bzz-raw://df6f0c459663c9858b6cba2cda1d14a7d05a985bed6d2de72bd8e78c25ee79db","dweb:/ipfs/QmeTTxZ7qVk9rjEv2R4CpCwdf8UMCcRqDNMvzNxHc3Fnn9"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/Context.sol":{"keccak256":"0x493033a8d1b176a037b2cc6a04dad01a5c157722049bbecf632ca876224dd4b2","urls":["bzz-raw://6a708e8a5bdb1011c2c381c9a5cfd8a9a956d7d0a9dc1bd8bcdaf52f76ef2f12","dweb:/ipfs/Qmax9WHBnVsZP46ZxEMNRQpLQnrdE4dK8LehML1Py8FowF"],"license":"MIT"},"src/PolicyGuard.sol":{"keccak256":"0x9e033ed68930a41d0ea88e6bce293b67e33aadd84d4c19faaeed4149dfc108b6","urls":["bzz-raw://a3c4ee7a8d43ef3b464ccdc9625fe2023a02bf525fc6d80d209b73bd513addd3","dweb:/ipfs/Qmcf2VHUFijP7qeWctjmpRt1VQ6T889UYPn1A6RjEAWByY"],"license":"MIT"},"src/interfaces/IPolicyGuard.sol":{"keccak256":"0x8637ff1941875c40b81a96c83007808d64fb49a185f999fbaa0e0daf27a545b5","urls":["bzz-raw://89c7f0c84f1232bd8096101c5dcc8d3bff41cae9af4dbef68f118a3f1d8661fd","dweb:/ipfs/QmX9NSEfBko6s4zXsTUnJZ4QvXpeTjA99hxkMiVn8roueg"],"license":"MIT"}},"version":1},"id":11}
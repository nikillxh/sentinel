{"abi":[{"type":"function","name":"getPolicy","inputs":[],"outputs":[{"name":"","type":"tuple","internalType":"struct IPolicyGuard.PolicyConfig","components":[{"name":"maxSettlementUsdc","type":"uint256","internalType":"uint256"},{"name":"maxSettlementEth","type":"uint256","internalType":"uint256"},{"name":"allowedTokens","type":"address[]","internalType":"address[]"},{"name":"policyHash","type":"bytes32","internalType":"bytes32"}]}],"stateMutability":"view"},{"type":"function","name":"isTokenAllowed","inputs":[{"name":"token","type":"address","internalType":"address"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"updatePolicy","inputs":[{"name":"newPolicy","type":"tuple","internalType":"struct IPolicyGuard.PolicyConfig","components":[{"name":"maxSettlementUsdc","type":"uint256","internalType":"uint256"},{"name":"maxSettlementEth","type":"uint256","internalType":"uint256"},{"name":"allowedTokens","type":"address[]","internalType":"address[]"},{"name":"policyHash","type":"bytes32","internalType":"bytes32"}]}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"validateSettlement","inputs":[{"name":"sessionId","type":"bytes32","internalType":"bytes32"},{"name":"usdcToken","type":"address","internalType":"address"},{"name":"usdcAmount","type":"uint256","internalType":"uint256"},{"name":"ethAmount","type":"uint256","internalType":"uint256"}],"outputs":[{"name":"","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"event","name":"PolicyUpdated","inputs":[{"name":"oldPolicyHash","type":"bytes32","indexed":false,"internalType":"bytes32"},{"name":"newPolicyHash","type":"bytes32","indexed":false,"internalType":"bytes32"},{"name":"timestamp","type":"uint256","indexed":false,"internalType":"uint256"}],"anonymous":false},{"type":"event","name":"SettlementApproved","inputs":[{"name":"sessionId","type":"bytes32","indexed":true,"internalType":"bytes32"},{"name":"usdcAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"ethAmount","type":"uint256","indexed":false,"internalType":"uint256"},{"name":"policyHash","type":"bytes32","indexed":false,"internalType":"bytes32"}],"anonymous":false},{"type":"event","name":"SettlementRejected","inputs":[{"name":"sessionId","type":"bytes32","indexed":true,"internalType":"bytes32"},{"name":"reason","type":"string","indexed":false,"internalType":"string"}],"anonymous":false},{"type":"error","name":"AssetNotAllowed","inputs":[{"name":"token","type":"address","internalType":"address"}]},{"type":"error","name":"ExceedsMaxSettlement","inputs":[{"name":"amount","type":"uint256","internalType":"uint256"},{"name":"max","type":"uint256","internalType":"uint256"}]},{"type":"error","name":"PolicyHashMismatch","inputs":[{"name":"expected","type":"bytes32","internalType":"bytes32"},{"name":"actual","type":"bytes32","internalType":"bytes32"}]},{"type":"error","name":"Unauthorized","inputs":[]}],"bytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"deployedBytecode":{"object":"0x","sourceMap":"","linkReferences":{}},"methodIdentifiers":{"getPolicy()":"ce1e4626","isTokenAllowed(address)":"f9eaee0d","updatePolicy((uint256,uint256,address[],bytes32))":"6c2291e6","validateSettlement(bytes32,address,uint256,uint256)":"32591710"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.24+commit.e11b9ed9\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"AssetNotAllowed\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"max\",\"type\":\"uint256\"}],\"name\":\"ExceedsMaxSettlement\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"expected\",\"type\":\"bytes32\"},{\"internalType\":\"bytes32\",\"name\":\"actual\",\"type\":\"bytes32\"}],\"name\":\"PolicyHashMismatch\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"Unauthorized\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"oldPolicyHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"newPolicyHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"timestamp\",\"type\":\"uint256\"}],\"name\":\"PolicyUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"sessionId\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"usdcAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"ethAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"policyHash\",\"type\":\"bytes32\"}],\"name\":\"SettlementApproved\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"bytes32\",\"name\":\"sessionId\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"reason\",\"type\":\"string\"}],\"name\":\"SettlementRejected\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"getPolicy\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"maxSettlementUsdc\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxSettlementEth\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"allowedTokens\",\"type\":\"address[]\"},{\"internalType\":\"bytes32\",\"name\":\"policyHash\",\"type\":\"bytes32\"}],\"internalType\":\"struct IPolicyGuard.PolicyConfig\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"token\",\"type\":\"address\"}],\"name\":\"isTokenAllowed\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"maxSettlementUsdc\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maxSettlementEth\",\"type\":\"uint256\"},{\"internalType\":\"address[]\",\"name\":\"allowedTokens\",\"type\":\"address[]\"},{\"internalType\":\"bytes32\",\"name\":\"policyHash\",\"type\":\"bytes32\"}],\"internalType\":\"struct IPolicyGuard.PolicyConfig\",\"name\":\"newPolicy\",\"type\":\"tuple\"}],\"name\":\"updatePolicy\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"sessionId\",\"type\":\"bytes32\"},{\"internalType\":\"address\",\"name\":\"usdcToken\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"usdcAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"ethAmount\",\"type\":\"uint256\"}],\"name\":\"validateSettlement\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{},\"title\":\"IPolicyGuard\",\"version\":1},\"userdoc\":{\"events\":{\"PolicyUpdated(bytes32,bytes32,uint256)\":{\"notice\":\"Emitted when the policy configuration is updated\"},\"SettlementApproved(bytes32,uint256,uint256,bytes32)\":{\"notice\":\"Emitted when a settlement passes policy checks\"},\"SettlementRejected(bytes32,string)\":{\"notice\":\"Emitted when a settlement is rejected by policy\"}},\"kind\":\"user\",\"methods\":{\"getPolicy()\":{\"notice\":\"Get the current policy configuration\"},\"isTokenAllowed(address)\":{\"notice\":\"Check if a token is allowed\"},\"updatePolicy((uint256,uint256,address[],bytes32))\":{\"notice\":\"Update the policy configuration (owner only)\"},\"validateSettlement(bytes32,address,uint256,uint256)\":{\"notice\":\"Validate a settlement against on-chain policy rules\"}},\"notice\":\"Interface for the on-chain policy enforcement contract\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/interfaces/IPolicyGuard.sol\":\"IPolicyGuard\"},\"evmVersion\":\"cancun\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/=lib/openzeppelin-contracts/contracts/\",\":ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":halmos-cheatcodes/=lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\"]},\"sources\":{\"src/interfaces/IPolicyGuard.sol\":{\"keccak256\":\"0x8637ff1941875c40b81a96c83007808d64fb49a185f999fbaa0e0daf27a545b5\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://89c7f0c84f1232bd8096101c5dcc8d3bff41cae9af4dbef68f118a3f1d8661fd\",\"dweb:/ipfs/QmX9NSEfBko6s4zXsTUnJZ4QvXpeTjA99hxkMiVn8roueg\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.24+commit.e11b9ed9"},"language":"Solidity","output":{"abi":[{"inputs":[{"internalType":"address","name":"token","type":"address"}],"type":"error","name":"AssetNotAllowed"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"max","type":"uint256"}],"type":"error","name":"ExceedsMaxSettlement"},{"inputs":[{"internalType":"bytes32","name":"expected","type":"bytes32"},{"internalType":"bytes32","name":"actual","type":"bytes32"}],"type":"error","name":"PolicyHashMismatch"},{"inputs":[],"type":"error","name":"Unauthorized"},{"inputs":[{"internalType":"bytes32","name":"oldPolicyHash","type":"bytes32","indexed":false},{"internalType":"bytes32","name":"newPolicyHash","type":"bytes32","indexed":false},{"internalType":"uint256","name":"timestamp","type":"uint256","indexed":false}],"type":"event","name":"PolicyUpdated","anonymous":false},{"inputs":[{"internalType":"bytes32","name":"sessionId","type":"bytes32","indexed":true},{"internalType":"uint256","name":"usdcAmount","type":"uint256","indexed":false},{"internalType":"uint256","name":"ethAmount","type":"uint256","indexed":false},{"internalType":"bytes32","name":"policyHash","type":"bytes32","indexed":false}],"type":"event","name":"SettlementApproved","anonymous":false},{"inputs":[{"internalType":"bytes32","name":"sessionId","type":"bytes32","indexed":true},{"internalType":"string","name":"reason","type":"string","indexed":false}],"type":"event","name":"SettlementRejected","anonymous":false},{"inputs":[],"stateMutability":"view","type":"function","name":"getPolicy","outputs":[{"internalType":"struct IPolicyGuard.PolicyConfig","name":"","type":"tuple","components":[{"internalType":"uint256","name":"maxSettlementUsdc","type":"uint256"},{"internalType":"uint256","name":"maxSettlementEth","type":"uint256"},{"internalType":"address[]","name":"allowedTokens","type":"address[]"},{"internalType":"bytes32","name":"policyHash","type":"bytes32"}]}]},{"inputs":[{"internalType":"address","name":"token","type":"address"}],"stateMutability":"view","type":"function","name":"isTokenAllowed","outputs":[{"internalType":"bool","name":"","type":"bool"}]},{"inputs":[{"internalType":"struct IPolicyGuard.PolicyConfig","name":"newPolicy","type":"tuple","components":[{"internalType":"uint256","name":"maxSettlementUsdc","type":"uint256"},{"internalType":"uint256","name":"maxSettlementEth","type":"uint256"},{"internalType":"address[]","name":"allowedTokens","type":"address[]"},{"internalType":"bytes32","name":"policyHash","type":"bytes32"}]}],"stateMutability":"nonpayable","type":"function","name":"updatePolicy"},{"inputs":[{"internalType":"bytes32","name":"sessionId","type":"bytes32"},{"internalType":"address","name":"usdcToken","type":"address"},{"internalType":"uint256","name":"usdcAmount","type":"uint256"},{"internalType":"uint256","name":"ethAmount","type":"uint256"}],"stateMutability":"view","type":"function","name":"validateSettlement","outputs":[{"internalType":"bool","name":"","type":"bool"}]}],"devdoc":{"kind":"dev","methods":{},"version":1},"userdoc":{"kind":"user","methods":{"getPolicy()":{"notice":"Get the current policy configuration"},"isTokenAllowed(address)":{"notice":"Check if a token is allowed"},"updatePolicy((uint256,uint256,address[],bytes32))":{"notice":"Update the policy configuration (owner only)"},"validateSettlement(bytes32,address,uint256,uint256)":{"notice":"Validate a settlement against on-chain policy rules"}},"version":1}},"settings":{"remappings":["@openzeppelin/=lib/openzeppelin-contracts/contracts/","ds-test/=lib/openzeppelin-contracts/lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","halmos-cheatcodes/=lib/openzeppelin-contracts/lib/halmos-cheatcodes/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/interfaces/IPolicyGuard.sol":"IPolicyGuard"},"evmVersion":"cancun","libraries":{}},"sources":{"src/interfaces/IPolicyGuard.sol":{"keccak256":"0x8637ff1941875c40b81a96c83007808d64fb49a185f999fbaa0e0daf27a545b5","urls":["bzz-raw://89c7f0c84f1232bd8096101c5dcc8d3bff41cae9af4dbef68f118a3f1d8661fd","dweb:/ipfs/QmX9NSEfBko6s4zXsTUnJZ4QvXpeTjA99hxkMiVn8roueg"],"license":"MIT"}},"version":1},"id":13}